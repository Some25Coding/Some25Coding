<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Powerful Time Teller ğŸŒ</title>
  <style>
    body {
      font-family: Century, sans-serif;
      background: #111;
      color: #fff;
      text-align: center;
      padding: 40px;
    }
    h1 {
      font-size: 3em;
      margin-bottom: 20px;
    }
    .time {
      font-size: 2em;
      margin: 10px 0;
    }
    .zone {
      font-size: 1.2em;
      color: #aaa;
    }
    .weather {
      font-size: 1.1em;
      color: #9df;
      margin-top: 10px;
    }
    .time-container {
      margin: 20px auto;
      border: 1px solid #333;
      border-radius: 12px;
      padding: 15px;
      background: rgba(255,255,255,0.05);
      box-shadow: 0 0 10px #000;
      max-width: 450px;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .time-container:hover {
      background: rgba(255,255,255,0.1);
      transform: scale(1.02);
    }
    .more-info {
      display: none;
      font-size: 1em;
      color: #ccc;
      margin-top: 10px;
      border-top: 1px solid #333;
      padding-top: 10px;
    }
    .expanded .more-info {
      display: block;
    }
  </style>
</head>
<body>
  <h1>ğŸ•’ Powerful Time Teller</h1>

  <!-- LOCAL -->
  <div class="time-container" id="localCard">
    <div class="time" id="localTime">Local Time: --:--:--</div>
    <div class="zone" id="localZone">--</div>
    <div class="weather" id="localWeather">ğŸŒ¡ï¸ Temperature: --Â°C | ğŸ’§ Humidity: --%</div>
    <div class="more-info" id="localMore">Loading...</div>
  </div>

  <!-- WORLD CITIES -->
  <div id="worldTimes"></div>

  <script>
  const cities = [
    { name: "Los Angeles", timeZone: "America/Los_Angeles" },
    { name: "New York", timeZone: "America/New_York" },
    { name: "London", timeZone: "Europe/London" },
    { name: "Berlin", timeZone: "Europe/Berlin" },
    { name: "Tokyo", timeZone: "Asia/Tokyo" }
  ];

  // Create time + weather containers
  const worldContainer = document.getElementById("worldTimes");
  cities.forEach(city => {
    const div = document.createElement("div");
    div.classList.add("time-container");
    div.id = `${city.name}Card`;
    div.innerHTML = `
      <div class="time" id="${city.name}Time">${city.name}: --:--:--</div>
      <div class="weather" id="${city.name}Weather">ğŸŒ¡ï¸ Temperature: --Â°C | ğŸ’§ Humidity: --%</div>
      <div class="more-info" id="${city.name}More">Loading...</div>
    `;
    worldContainer.appendChild(div);
  });

  // Convert weather description to emoji
  function weatherToEmoji(description) {
    description = description.toLowerCase();
    if (description.includes("sun") || description.includes("clear")) return "â˜€ï¸";
    if (description.includes("cloud")) return "â˜ï¸";
    if (description.includes("rain")) return "ğŸŒ§ï¸";
    if (description.includes("storm") || description.includes("thunder")) return "â›ˆï¸";
    if (description.includes("snow")) return "â„ï¸";
    if (description.includes("fog") || description.includes("mist") || description.includes("haze")) return "ğŸŒ«ï¸";
    return "ğŸŒ";
  }

  // Update time function
  function updateTime() {
    const now = new Date();
    const options12hr = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true };

    document.getElementById("localTime").textContent =
      "Local Time: " + now.toLocaleTimeString("en-US", options12hr);
    document.getElementById("localZone").textContent =
      Intl.DateTimeFormat().resolvedOptions().timeZone;

    cities.forEach(city => {
      const cityTime = new Date().toLocaleTimeString("en-US", { ...options12hr, timeZone: city.timeZone });
      document.getElementById(`${city.name}Time`).textContent = `${city.name}: ${cityTime}`;
    });
  }

  // Fetch weather from wttr.in
  async function fetchWeather(cityName) {
    const response = await fetch(`https://wttr.in/${cityName}?format=j1`);
    const data = await response.json();
    const current = data.current_condition[0];
    const tempC = current.temp_C;
    const humidity = current.humidity;
    const desc = current.weatherDesc[0].value;
    const feelsLike = current.FeelsLikeC;
    const wind = current.windspeedKmph;
    const emoji = weatherToEmoji(desc);

    return { tempC, humidity, desc, feelsLike, wind, emoji };
  }

  // Update weather for all cards
  async function updateWeather() {
    // Local (auto)
    try {
      const res = await fetch("https://wttr.in/?format=j1");
      const data = await res.json();
      const cur = data.current_condition[0];
      const desc = cur.weatherDesc[0].value;
      const emoji = weatherToEmoji(desc);
      document.getElementById("localWeather").textContent =
        `${emoji} ${desc} | ğŸŒ¡ï¸ ${cur.temp_C}Â°C | ğŸ’§ ${cur.humidity}%`;
      document.getElementById("localMore").innerHTML =
        `Feels like: ${cur.FeelsLikeC}Â°C<br>Wind: ${cur.windspeedKmph} km/h<br>Pressure: ${cur.pressure} hPa`;
    } catch {
      document.getElementById("localWeather").textContent = "ğŸŒ Weather unavailable";
    }

    // Other cities
    for (const city of cities) {
      try {
        const w = await fetchWeather(city.name);
        document.getElementById(`${city.name}Weather`).textContent =
          `${w.emoji} ${w.desc} | ğŸŒ¡ï¸ ${w.tempC}Â°C | ğŸ’§ ${w.humidity}%`;
        document.getElementById(`${city.name}More`).innerHTML =
          `Feels like: ${w.feelsLike}Â°C<br>Wind: ${w.wind} km/h`;
      } catch {
        document.getElementById(`${city.name}Weather`).textContent = "ğŸŒ Weather unavailable";
      }
    }
  }

  // Toggle card expansion
  function toggleCard(cardId) {
    const card = document.getElementById(cardId);
    card.classList.toggle("expanded");
  }

  // Add click listeners
  document.getElementById("localCard").addEventListener("click", () => toggleCard("localCard"));
  cities.forEach(city => {
    document.getElementById(`${city.name}Card`)
      .addEventListener("click", () => toggleCard(`${city.name}Card`));
  });

  // Start updates
  setInterval(updateTime, 1000);
  updateTime();

  updateWeather();
  setInterval(updateWeather, 600000); // every 10 min
  </script>
</body>
</html>
